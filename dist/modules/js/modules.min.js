!function(e){"use strict";function n(n,t,d){var i,o,r,s,l,a,u,c=d.className,g=p.test(c),m=w.test(c),h={menuItems:[],currentIsHidden:g,flushRight:m},f={},v="",_=e.registeredWidgets[t];for(d.className+=" drop-down__select--hidden",i=d.children,s=0,l=i.length;l>s;s+=1)o=i[s],h.menuItems.push({text:o.innerHTML,isCurrent:o.selected}),o.selected&&(r=o.innerHTML);for(f.triggerText=r,v+=_.templates.trigger(f),v+=_.templates.menu(h),a=document.createElement("div"),a.innerHTML=v,u=a.children;u.length;)n.appendChild(u[0])}function t(n,t,d,i){var o,r,s,l,a,u,c,p=e.registeredWidgets[t];for(s=d.children,l=0,a=s.length;a>l;l+=1)s[l].children[0].tabIndex=-1;if(d.className+=" drop-down__menu--hidden",!i)for(o={triggerText:d.getAttribute("drop-down-trigger-text")||"Menu"},r=p.templates.trigger(o),u=document.createElement("div"),u.innerHTML=r,c=u.children;c.length;)n.insertBefore(c[0],d)}function d(e,d){var i=e.querySelectorAll(".drop-down__select")[0],o=e.querySelectorAll(".drop-down__trigger")[0],r=e.querySelectorAll(".drop-down__menu")[0];return i?n(e,d,i):r&&t(e,d,r,o),!0}function i(e,n){var t=n.clientWidth,d=e.clientWidth;t>d&&m.test(n.ClassName)&&(e.style.width=t+"px")}function o(e,n,t){n.addEventListener("click",function(n){var d,i;return n.preventDefault(),g.test(t.className)?(d=new window.CustomEvent("dropDownShow"),e.dispatchEvent(d)):(i=new window.CustomEvent("dropDownHide"),e.dispatchEvent(i)),!1},!0)}function r(e,n,t){e.addEventListener("keyup",function(d){var i,o,r;if(g.test(t.className))32===d.keyCode&&"A"===d.target.tagName?d.target.click():(39===d.keyCode||40===d.keyCode)&&(i=new window.CustomEvent("dropDownShow"),e.dispatchEvent(i));else if(32===d.keyCode&&"A"===d.target.tagName)d.target.click();else if(37===d.keyCode||38===d.keyCode)if("BUTTON"===d.target.tagName)o=new window.CustomEvent("dropDownHide"),e.dispatchEvent(o);else{for(r=d.target.parentElement.previousSibling,r&&h.test(r.className)&&(r=r.previousSibling);r&&1!==r.nodeType;)r=r.previousSibling,r&&h.test(r.className)&&(r=r.previousSibling);r?r.children[0].focus():n.focus()}else if(39===d.keyCode||40===d.keyCode){for(r="BUTTON"===d.target.tagName?t.children[0]:d.target.parentElement.nextSibling,r&&h.test(r.className)&&(r=r.nextSibling);r&&1!==r.nodeType;)r=r.nextSibling,r&&h.test(r.className)&&(r=r.nextSibling);r&&r.children[0].focus()}},!0)}function s(e,n){n.addEventListener("click",function(n){var t;"A"===n.target.tagName&&(t=new window.CustomEvent("dropDownSelect",{detail:{select:n.target}}),e.dispatchEvent(t))},!0)}function l(e,n,t,d){e.addEventListener("dropDownShow",function(){var i,o,r,s;i=new window.CustomEvent("dropDownWillShow",{detail:{widget:e}}),e.dispatchEvent(i),document.body.dispatchEvent(i),r=t.className,s=n.className,r=r.replace(v," "),s=s.replace(y," ")+" drop-down__trigger--active",t.className=r,n.className=s,o=new window.CustomEvent("dropDownDidShow",{detail:{widget:e}}),document.body.addEventListener("dropDownWillShow",d,!0),t.scrollTop=1,t.scrollTop=0,n.focus(),e.dispatchEvent(o)},!0)}function a(e,n,t,d){e.addEventListener("dropDownHide",function(){var i,o,r,s;i=new window.CustomEvent("dropDownWillHide",{detail:{widget:e}}),e.dispatchEvent(i),r=t.className,s=n.className,r=r.replace(v," "),r+=" drop-down__menu--hidden",s=s.replace(y," "),t.className=r,n.className=s,o=new window.CustomEvent("dropDownDidHide",{detail:{widget:e}}),document.body.removeEventListener("dropDownWillShow",d,!0),e.dispatchEvent(o)},!0)}function u(e,n,t){e.addEventListener("dropDownSelect",function(d){var i,o,r,s,l,a,u,c,p,w,g=d.detail.select,m=e.querySelectorAll(".drop-down__menu-option--hidden").length;if(!f.test(n.className)){for(n.innerHTML=g.innerHTML,r=t.children,s=0,l=r.length;l>s;s+=1)a=r[s],u=a.className,u=u.replace(E," "),u=u.replace(_," "),a.children[0]===g&&(u+=" drop-down__menu-option--current",m&&(u+=" drop-down__menu-option--hidden")),a.className=u;if(c=e.querySelectorAll(".drop-down__select")[0]){for(p=-1,w=g.parentElement.previousSibling;w;)1!==w.nodeType&&(p+=1),w=w.previousSibling;c.selectedIndex=p}}o=new window.CustomEvent("dropDownHide",{detail:{widget:e}}),n.focus(),i=new window.CustomEvent("dropDownDidSelect",{detail:{widget:d.detail.widget,selected:d.detail.select}}),e.dispatchEvent(i),e.dispatchEvent(o)},!0)}function c(e){var n=e.querySelectorAll(".drop-down__trigger")[0],t=e.querySelectorAll(".drop-down__menu")[0],d=function(n){var t;n.detail.widget!==e&&(t=new window.CustomEvent("dropDownHide"),e.dispatchEvent(t))};return i(e,t),o(e,n,t),r(e,n,t),s(e,t),l(e,n,t,d),a(e,n,t,d),u(e,n,t),!0}var p=/(^| )drop-down__select--hide-current( |$)/,w=/(^| )drop-down__select--flush-right( |$)/,g=/(^| )drop-down__menu--hidden( |$)/,m=/(^| )drop-down__menu--fixed( |$)/,h=/(^| )drop-down__menu-option--hidden( |$)/,f=/(^| )drop-down__trigger--fixed( |$)/,v=/(^| )drop-down__menu--hidden( |$)/g,_=/(^| )drop-down__menu-option--hidden( |$)/g,E=/(^| )drop-down__menu-option--current( |$)/g,y=/(^| )drop-down__trigger--active( |$)/g;e.registerWidget({widgetType:"dropDown",widgetClass:"drop-down",templates:{trigger:function(e){var n,t=[],d=e||{};return function(e,d){var i=["drop-down__trigger"];e&&i.push("drop-down__trigger--fixed"),t.push("\n<button"+jade.cls([i],[!0])+">"+jade.escape(null==(n=d)?"":n)+"</button>")}.call(this,"fixedTrigger"in d?d.fixedTrigger:"undefined"!=typeof fixedTrigger?fixedTrigger:void 0,"triggerText"in d?d.triggerText:"undefined"!=typeof triggerText?triggerText:void 0),t.join("")},menu:function(e){var n,t=[],d=e||{};return function(e,d,i){var o=["drop-down__menu","drop-down__menu--hidden"];d&&o.push("drop-down__menu--flush-right"),t.push("\n<ul"+jade.cls([o],[!0])+">"),function(){var d=i;if("number"==typeof d.length)for(var o=0,r=d.length;r>o;o++){var s=d[o],l=["drop-down__menu-option"];s.isCurrent&&l.push("drop-down__menu-option--current"),s.isCurrent&&e&&l.push("drop-down__menu-option--hidden"),t.push("\n  <li"+jade.cls([l],[!0])+'><a tabindex="-1" href="javascript:;" class="drop-down__menu-option-trigger">'+jade.escape(null==(n=s.text)?"":n)+"</a></li>")}else{var r=0;for(var o in d){r++;var s=d[o],l=["drop-down__menu-option"];s.isCurrent&&l.push("drop-down__menu-option--current"),s.isCurrent&&e&&l.push("drop-down__menu-option--hidden"),t.push("\n  <li"+jade.cls([l],[!0])+'><a tabindex="-1" href="javascript:;" class="drop-down__menu-option-trigger">'+jade.escape(null==(n=s.text)?"":n)+"</a></li>")}}}.call(this),t.push("\n</ul>")}.call(this,"currentIsHidden"in d?d.currentIsHidden:"undefined"!=typeof currentIsHidden?currentIsHidden:void 0,"flushRight"in d?d.flushRight:"undefined"!=typeof flushRight?flushRight:void 0,"menuItems"in d?d.menuItems:"undefined"!=typeof menuItems?menuItems:void 0,"undefined"in d?d.undefined:void 0),t.join("")}},build:d,enhance:c})}(window.SignalUI);