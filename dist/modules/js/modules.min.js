this.SignalUI=this.SignalUI||{},this.SignalUI.templates=this.SignalUI.templates||{},this.SignalUI.templates["drop-down-menu"]=Handlebars.template({1:function(){return" drop-down__menu--flush-right"},3:function(){return" drop-down__menu--flush-left"},5:function(e,n,t,i){var r,o,d,l="function",s=n.helperMissing,a=n.blockHelperMissing,u=this.escapeExpression,c='		<li class="drop-down__menu-option';return o=null!=(o=n.isCurrent||(null!=e?e.isCurrent:e))?o:s,d={name:"isCurrent",hash:{},fn:this.program(6,i),inverse:this.noop,data:i},r=typeof o===l?o.call(e,d):o,n.isCurrent||(r=a.call(e,r,d)),null!=r&&(c+=r),c+'"><a tabindex="-1" href="javascript:;" class="drop-down__menu-option-trigger">'+u((o=null!=(o=n.text||(null!=e?e.text:e))?o:s,typeof o===l?o.call(e,{name:"text",hash:{},data:i}):o))+"</a></li>\n"},6:function(e,n,t,i){var r,o,d,l="function",s=n.helperMissing,a=n.blockHelperMissing,u=" drop-down__menu-option--current";return o=null!=(o=n.currentIsHidden||(null!=e?e.currentIsHidden:e))?o:s,d={name:"currentIsHidden",hash:{},fn:this.program(7,i),inverse:this.noop,data:i},r=typeof o===l?o.call(e,d):o,n.currentIsHidden||(r=a.call(e,r,d)),null!=r&&(u+=r),u},7:function(){return" drop-down__menu-option--hidden"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,n,t,i){var r,o,d,l="function",s=n.helperMissing,a=n.blockHelperMissing,u='<ul class="drop-down__menu drop-down__menu--hidden';return o=null!=(o=n.flushRight||(null!=e?e.flushRight:e))?o:s,d={name:"flushRight",hash:{},fn:this.program(1,i),inverse:this.noop,data:i},r=typeof o===l?o.call(e,d):o,n.flushRight||(r=a.call(e,r,d)),null!=r&&(u+=r),o=null!=(o=n.flushLeft||(null!=e?e.flushLeft:e))?o:s,d={name:"flushLeft",hash:{},fn:this.program(3,i),inverse:this.noop,data:i},r=typeof o===l?o.call(e,d):o,n.flushLeft||(r=a.call(e,r,d)),null!=r&&(u+=r),u+='">\n',o=null!=(o=n.menuItems||(null!=e?e.menuItems:e))?o:s,d={name:"menuItems",hash:{},fn:this.program(5,i),inverse:this.noop,data:i},r=typeof o===l?o.call(e,d):o,n.menuItems||(r=a.call(e,r,d)),null!=r&&(u+=r),u+"</ul>\n"},useData:!0}),this.SignalUI.templates["drop-down-trigger"]=Handlebars.template({1:function(){return" drop-down__trigger--fixed"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,n,t,i){var r,o,d,l="function",s=n.helperMissing,a=n.blockHelperMissing,u=this.escapeExpression,c='<button class="drop-down__trigger';return o=null!=(o=n.fixedTrigger||(null!=e?e.fixedTrigger:e))?o:s,d={name:"fixedTrigger",hash:{},fn:this.program(1,i),inverse:this.noop,data:i},r=typeof o===l?o.call(e,d):o,n.fixedTrigger||(r=a.call(e,r,d)),null!=r&&(c+=r),c+'">\n	'+u((o=null!=(o=n.triggerText||(null!=e?e.triggerText:e))?o:s,typeof o===l?o.call(e,{name:"triggerText",hash:{},data:i}):o))+"\n</button>"},useData:!0}),function(e){"use strict";function n(n,t,i){var r,o,d,l,s,a,u,c=i.className,g=p.test(c),m=h.test(c),f=w.test(c),v={menuItems:[],currentIsHidden:g,flushRight:m,flushLeft:f},_={},E="";for(i.className+=" drop-down__select--hidden",r=i.children,l=0,s=r.length;s>l;l+=1)o=r[l],v.menuItems.push({text:o.innerHTML,isCurrent:o.selected}),o.selected&&(d=o.innerHTML);for(_.triggerText=d,E+=e.templates["drop-down-trigger"](_),E+=e.templates["drop-down-menu"](v),a=document.createElement("div"),a.innerHTML=E,u=a.children;u.length;)n.appendChild(u[0])}function t(n,t,i,r){var o,d,l,s,a,u,c;for(l=i.children,s=0,a=l.length;a>s;s+=1)l[s].children[0].tabIndex=-1;if(i.className+=" drop-down__menu--hidden",!r)for(o={triggerText:i.getAttribute("drop-down-trigger-text")||"Menu",fixedTrigger:g.test(i.className)},d=e.templates["drop-down-trigger"](o),u=document.createElement("div"),u.innerHTML=d,c=u.children;c.length;)n.insertBefore(c[0],i)}function i(e,i){var r=e.querySelectorAll(".drop-down__select")[0],o=e.querySelectorAll(".drop-down__trigger")[0],d=e.querySelectorAll(".drop-down__menu")[0];return r?n(e,i,r):d&&t(e,i,d,o),!0}function r(e,n,t){var i=t.clientWidth,r=e.clientWidth;i>r&&!v.test(n.className)&&(e.style.width=i+"px")}function o(e,n,t){n.addEventListener("click",function(n){var i,r;return n.preventDefault(),m.test(t.className)?(i=new window.CustomEvent("dropDownShow"),e.dispatchEvent(i)):(r=new window.CustomEvent("dropDownHide"),e.dispatchEvent(r)),!1},!0)}function d(e,n,t){e.addEventListener("keyup",function(i){var r,o,d;if(m.test(t.className))32===i.keyCode&&"A"===i.target.tagName?i.target.click():(39===i.keyCode||40===i.keyCode)&&(r=new window.CustomEvent("dropDownShow"),e.dispatchEvent(r));else if(32===i.keyCode&&"A"===i.target.tagName)i.target.click();else if(37===i.keyCode||38===i.keyCode)if("BUTTON"===i.target.tagName)o=new window.CustomEvent("dropDownHide"),e.dispatchEvent(o);else{for(d=i.target.parentElement.previousSibling,d&&f.test(d.className)&&(d=d.previousSibling);d&&1!==d.nodeType;)d=d.previousSibling,d&&f.test(d.className)&&(d=d.previousSibling);d?d.children[0].focus():n.focus()}else if(39===i.keyCode||40===i.keyCode){for(d="BUTTON"===i.target.tagName?t.children[0]:i.target.parentElement.nextSibling,d&&f.test(d.className)&&(d=d.nextSibling);d&&1!==d.nodeType;)d=d.nextSibling,d&&f.test(d.className)&&(d=d.nextSibling);d&&d.children[0].focus()}},!0)}function l(e,n){n.addEventListener("click",function(n){var t;"A"===n.target.tagName&&(t=new window.CustomEvent("dropDownSelect",{detail:{select:n.target}}),e.dispatchEvent(t))},!0)}function s(e,n,t,i){e.addEventListener("dropDownShow",function(){var r,o,d,l;r=new window.CustomEvent("dropDownWillShow",{detail:{widget:e}}),e.dispatchEvent(r),document.body.dispatchEvent(r),d=t.className,l=n.className,d=d.replace(_," "),l=l.replace(y," ")+" drop-down__trigger--active",t.className=d,n.className=l,o=new window.CustomEvent("dropDownDidShow",{detail:{widget:e}}),document.body.addEventListener("dropDownWillShow",i,!0),t.scrollTop=1,t.scrollTop=0,n.focus(),e.dispatchEvent(o)},!0)}function a(e,n,t,i){e.addEventListener("dropDownHide",function(){var r,o,d,l;r=new window.CustomEvent("dropDownWillHide",{detail:{widget:e}}),e.dispatchEvent(r),d=t.className,l=n.className,d=d.replace(_," "),d+=" drop-down__menu--hidden",l=l.replace(y," "),t.className=d,n.className=l,o=new window.CustomEvent("dropDownDidHide",{detail:{widget:e}}),document.body.removeEventListener("dropDownWillShow",i,!0),e.dispatchEvent(o)},!0)}function u(e,n,t){e.addEventListener("dropDownSelect",function(i){var r,o,d,l,s,a,u,c,p,g,h=i.detail.select,w=e.querySelectorAll(".drop-down__menu-option--hidden").length;if(!v.test(n.className)){for(n.innerHTML=h.innerHTML,d=t.children,l=0,s=d.length;s>l;l+=1)a=d[l],u=a.className,u=u.replace(S," "),u=u.replace(E," "),a.children[0]===h&&(u+=" drop-down__menu-option--current",w&&(u+=" drop-down__menu-option--hidden")),a.className=u;if(c=e.querySelectorAll(".drop-down__select")[0]){for(p=-1,g=h.parentElement.previousSibling;g;)1!==g.nodeType&&(p+=1),g=g.previousSibling;c.selectedIndex=p}}o=new window.CustomEvent("dropDownHide",{detail:{widget:e}}),n.focus(),r=new window.CustomEvent("dropDownDidSelect",{detail:{widget:i.detail.widget,selected:i.detail.select}}),e.dispatchEvent(r),e.dispatchEvent(o)},!0)}function c(e){var n=e.querySelectorAll(".drop-down__trigger")[0],t=e.querySelectorAll(".drop-down__menu")[0],i=function(n){var t;n.detail.widget!==e&&(t=new window.CustomEvent("dropDownHide"),e.dispatchEvent(t))};return r(e,n,t),o(e,n,t),d(e,n,t),l(e,t),s(e,n,t,i),a(e,n,t,i),u(e,n,t),!0}var p=/(^| )drop-down__select--hide-current( |$)/,g=/(^| )drop-down__menu--flush-(right|left)( |$)/,h=/(^| )drop-down__menu--flush-right( |$)/,w=/(^| )drop-down__menu--flush-left( |$)/,m=/(^| )drop-down__menu--hidden( |$)/,f=/(^| )drop-down__menu-option--hidden( |$)/,v=/(^| )drop-down__trigger--fixed( |$)/,_=/(^| )drop-down__menu--hidden( |$)/g,E=/(^| )drop-down__menu-option--hidden( |$)/g,S=/(^| )drop-down__menu-option--current( |$)/g,y=/(^| )drop-down__trigger--active( |$)/g;e.registerWidget({widgetType:"dropDown",widgetClass:"drop-down",build:i,enhance:c})}(window.SignalUI);